# Notification Demo

This project demonstrates how to implement push notifications in a Flutter app using Firebase Cloud Messaging (FCM) and flutter_local_notifications. It covers both foreground and background notification handling, authentication, and platform-specific setup for Android and iOS.

## Table of Contents
- [Features](#features)
- [Tech Stack](#tech-stack)
- [Setup Instructions](#setup-instructions)
- [Firebase Configuration](#firebase-configuration)
- [Notification Methods](#notification-methods)
- [How Notifications Work](#how-notifications-work)
- [Code Structure](#code-structure)
- [Troubleshooting](#troubleshooting)
- [References](#references)

---

## Features
- Firebase Cloud Messaging integration
- Local notification display (flutter_local_notifications)
- Foreground, background, and terminated state notification handling
- User authentication (Firebase Auth)
- Platform support: Android, iOS, Web

## Tech Stack
- Flutter
- Dart
- Firebase (Cloud Messaging, Auth, Core)
- flutter_local_notifications

## Setup Instructions
1. **Clone the repository:**
   ```sh
   git clone <repo-url>
   cd notification_demo
   ```
2. **Install dependencies:**
   ```sh
   flutter pub get
   ```
3. **Firebase Setup:**
   - Create a Firebase project at [Firebase Console](https://console.firebase.google.com/).
   - Add Android and iOS apps to the project.
   - Download `google-services.json` (Android) and `GoogleService-Info.plist` (iOS) and place them in the respective directories:
     - `android/app/google-services.json`
     - `ios/Runner/GoogleService-Info.plist`
   - Enable **Cloud Messaging** and **Authentication** in Firebase Console.
4. **Configure platforms:**
   - **Android:** Ensure `minSdkVersion` is at least 21 in `android/app/build.gradle`.
   - **iOS:** Set up push notification capabilities in Xcode.
5. **Run the app:**
   ```sh
   flutter run
   ```

## Firebase Configuration
- The project uses `firebase_options.dart` generated by the [FlutterFire CLI](https://firebase.flutter.dev/docs/cli/).
- Make sure to run:
  ```sh
  flutterfire configure
  ```
  to generate the correct options file.

## Notification Methods

### 1. **Push Notifications (FCM)**
- **Method Used:** `FirebaseMessaging.onMessage`, `FirebaseMessaging.onBackgroundMessage`
- **How It Works:**
  - When a message is received while the app is in the foreground, `onMessage` is triggered and a local notification is displayed using `flutter_local_notifications`.
  - For background/terminated state, `onBackgroundMessage` handles the message and can perform background tasks or show notifications.

### 2. **Local Notifications**
- **Method Used:** `FlutterLocalNotificationsPlugin.show()`
- **How It Works:**
  - Used to display notifications on the device when a push message is received or for scheduled/reminder notifications.

### 3. **Authentication**
- **Method Used:** `FirebaseAuth` (see `auth_screen.dart`)
- **How It Works:**
  - Users can sign in/sign up using email/password or other providers. Auth state is managed to restrict notification access to authenticated users.

## How Notifications Work
1. **App Initialization:**
   - Firebase is initialized in `main.dart`.
   - Notification channels are set up for Android.
2. **Permission Request:**
   - The app requests notification permissions from the user.
3. **Token Generation:**
   - Each device gets a unique FCM token for targeting notifications.
4. **Message Handling:**
   - Foreground: Show local notification via `onMessage`.
   - Background/Terminated: Handle via `onBackgroundMessage`.
5. **Custom Actions:**
   - Notifications can include custom data for navigation or actions within the app.

## Code Structure
- `lib/main.dart`: App entry point, Firebase initialization, notification setup.
- `lib/auth_screen.dart`: User authentication UI and logic.
- `lib/firebase_options.dart`: Firebase configuration.
- `android/`, `ios/`: Platform-specific setup.
- `assets/service_account.json`: (Optional) For server-side messaging.

## Troubleshooting
- **Notifications not received:**
  - Check Firebase setup and permissions.
  - Ensure device is online and FCM token is valid.
- **iOS issues:**
  - Make sure push notification capabilities are enabled in Xcode.
- **Android issues:**
  - Confirm `google-services.json` is present and correct.
- **Auth problems:**
  - Check Firebase Auth settings and rules.

## References
- [FlutterFire Documentation](https://firebase.flutter.dev/docs/overview)
- [Firebase Cloud Messaging](https://firebase.google.com/docs/cloud-messaging)
- [flutter_local_notifications](https://pub.dev/packages/flutter_local_notifications)

---

## Author
Created by Chirag Chaudhary.
